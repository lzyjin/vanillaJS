// 43ì¥ Ajax

// ğŸ‘‰ Ajaxë€?

// Ajax(Asynchronous JavaScript and XML)ë€ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì—ê²Œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³ , ì„œë²„ê°€ ì‘ë‹µí•œ ë°ì´í„°ë¥¼
// ìˆ˜ì‹ í•˜ì—¬ ì›¹í˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ì„ ë§í•œë‹¤.
// AjaxëŠ” ë¸Œë¼ìš°ì €ì—ê²Œ ì œê³µí•˜ëŠ” Web APIì¸ XMLHttpRequest ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.
// XMLHttpRequestëŠ” HTTP ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•œ ë©”ì„œë“œì™€ í”„ë¡œí¼í‹°ë¥¼ ì œê³µí•œë‹¤.

// 1999ë…„ ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ê°€ ê°œë°œí•œ XMLHttpRequestëŠ” ê·¸ë‹¤ì§€ í° ì£¼ëª©ì„ ë°›ì§€ ëª»í•˜ë‹¤ê°€ 2005ë…„ êµ¬ê¸€ì´ ë°œí‘œí•œ êµ¬ê¸€ ë§µìŠ¤ë¥¼ í†µí•´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ
// í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê°€ëŠ¥ì„±ì„ í™•ì¸í•˜ëŠ” ê³„ê¸°ë¥¼ ë§ˆë ¨í–ˆë‹¤.
// ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ Ajaxë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” êµ¬ê¸€ ë§µìŠ¤ê°€ ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë¹„êµí•´ ì†ìƒ‰ì´ ì—†ì„ ì •ë„ë¡œ í¼í¬ë¨¼ìŠ¤ì™€ ë¶€ë“œëŸ¬ìš´ í™”ë©´ ì „í™˜ íš¨ê³¼ë¥¼
// ë³´ì—¬ì¤€ ê²ƒì´ë‹¤.

// ì´ì „ì˜ ì›¹í˜ì´ì§€ëŠ” html íƒœê·¸ë¡œ ì‹œì‘í•´ì„œ html íƒœê·¸ë¡œ ëë‚˜ëŠ” ì™„ì „í•œ HTMLì„ ì„œë²„ë¡œë¶€í„° ì „ì†¡ë°›ì•„ ì›¹í˜ì´ì§€ ì „ì²´ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í–ˆë‹¤.
// ë”°ë¼ì„œ í™”ë©´ì´ ì „í™˜ë˜ë©´ ì„œë²„ë¡œë¶€í„° ìƒˆë¡œìš´ HTMLì„ ì „ì†¡ë°›ì•„ ì›¹í˜ì´ì§€ ì „ì²´ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë Œë”ë§í–ˆë‹¤.

// ì´ëŸ¬í•œ ì „í†µì ì¸ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ì ì´ ìˆë‹¤.
// 1. ì´ì „ ì›¹í˜ì´ì§€ì™€ ì°¨ì´ê°€ ì—†ì–´ì„œ ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ê¹Œì§€ í¬í•¨ëœ ì™„ì „í•œ HTMLì„ ì„œë²„ë¡œë¶€í„° ë§¤ë²ˆ ë‹¤ì‹œ ì „ì†¡ë°›ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë°ì´í„° í†µì‹ ì´ ë°œìƒí•œë‹¤.
// 2. ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ê¹Œì§€ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë Œë”ë§í•œë‹¤. ì´ë¡œ ì¸í•´ í™”ë©´ ì „í™˜ì´ ì¼ì–´ë‚˜ë©´ í™”ë©´ì´ ìˆœê°„ì ìœ¼ë¡œ ê¹œë°•ì´ëŠ” í˜„ìƒì´ ë°œìƒí•œë‹¤.
// 3. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì™€ì˜ í†µì‹ ì´ ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ë¡œë¶€í„° ì‘ë‹µì´ ìˆì„ë•Œê¹Œì§€ ë‹¤ìŒ ì²˜ë¦¬ëŠ” ë¸”ë¡œí‚¹ëœë‹¤.

// Ajaxì˜ ë“±ì¥ì€ ì´ì „ì˜ ì „ã…Œì˜¤ì ì¸ íŒ¨ëŸ¬ë‹¤ì„ì„ íšê¸°ì ìœ¼ë¡œ ì „í™˜í–ˆë‹¤.
// ì¦‰, ì„œë²„ë¡œë¶€í„° ì›¹í˜ì´ì§€ì˜ ë³€ê²½ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì „ì†¡ë°›ì•„ ì›¹í˜ì´ì§€ë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ì€ ë‹¤ì‹œ ë Œë”ë§í•˜ì§€ ì•Šê³ , ë³€ê²½í•  í•„ìš”ê°€ ìˆëŠ”
// ë¶€ë¶„ë§Œ í•œì •ì ìœ¼ë¡œ ë Œë”ë§í•˜ëŠ” ë°©ì‹ì´ ê°€ëŠ¥í•´ì§„ ê²ƒì´ë‹¤.
// ì´ë¥¼ í†µí•´ ë¸Œë¼ìš°ì €ì—ì„œë„ ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìœ ì‚¬í•œ ë¹ ë¥¸ í¼í¬ë¨¼ìŠ¤ì™€ ë¶€ë“œëŸ¬ìš´ í™”ë©´ ì „í™˜ì´ ê°€ëŠ¥í•´ì¡Œë‹¤.

// AjaxëŠ” ì „í†µì ì¸ ë°©ì‹ê³¼ ë¹„êµí–ˆì„ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ìˆë‹¤.
// 1. ë³€ê²½í•  ë¶€ë¶„ì„ ê°±ì‹ í•˜ëŠ” ë° í•„ìš”í•œ ë°ì´í„°ë§Œ ì„œë²„ë¡œë¶€í„° ì „ì†¡ë°›ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë°ì´í„° í†µì‹ ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.
// 2. ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ì€ ë‹¤ì‹œ ë Œë”ë§í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ í™”ë©´ì´ ìˆœê°„ì ìœ¼ë¡œ ê¹œë°•ì´ëŠ” í˜„ìƒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.
// 3. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì™€ì˜ í†µì‹ ì´ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ì—ê²Œ ìš”ì²­ì„ ë³´ë‚¸ ì´í›„ ë¸”ë¡œí‚¹ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.


// ğŸ‘‰ JSON
// â—ï¸ JSON(Javascript Object Notation)ì€ í¬ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ HTTP í†µì‹ ì„ ìœ„í•œ í…ìŠ¤íŠ¸ ë°ì´í„° í¬ë§·ì´ë‹¤.
// â—ï¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ” ì–¸ì–´ ë…ë¦½í˜• ë°ì´í„° í¬ë§·ìœ¼ë¡œ, ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

// ğŸ“Œ JSON í‘œê¸° ë°©ì‹
// â—ï¸ JSONì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê°ì²´ ë¦¬í„°ëŸ´ê³¼ ìœ ì‚¬í•˜ê²Œ í‚¤ì™€ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ ìˆœìˆ˜í•œ í…ìŠ¤íŠ¸ë‹¤.
/*
{
    "name": "Lee",
    "age": 20,
    "alive": true,
    "hobby": ["traveling", "tennis"]
}
*/

// â—ï¸ JSONì˜ í‚¤ëŠ” ë°˜ë“œì‹œ í°ë”°ì˜´í‘œ(ì‘ì€ë”°ì˜´í‘œ ì‚¬ìš© ë¶ˆê°€)ë¡œ ë¬¶ì–´ì•¼ í•œë‹¤.
// â— ê°’ì€ ê°ì²´ ë¦¬í„°ëŸ´ê³¼ ê°™ì€ í‘œê¸°ë²•ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
// â—ï¸ í•˜ì§€ë§Œ ë¬¸ìì—´ì€ ë°˜ë“œì‹œ í° ë”°ì˜´í‘œ(ì‘ì€ë”°ì˜´í‘œ ì‚¬ìš© ë¶ˆê°€)ë¡œ ë¬¶ì–´ì•¼ í•œë‹¤.

// ğŸ“Œ JSON.stringify
// https://ko.javascript.info/json -----------
// - JSON.stringify: ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë°”ê¿”ì¤€ë‹¤.
// - JSON.parse: JSONì„ ê°ì²´ë¡œ ë°”ê¿”ì¤€ë‹¤

// JSON.stringify(value[, replacer, space])
// value: ì¸ì½”ë”©í•˜ë ¤ëŠ” ê°’
// replacer: JSONìœ¼ë¡œ ì¸ì½”ë”©í•˜ê¸¸ ì›í•˜ëŠ” í”„ë¡œí¼í‹°ê°€ ë‹´ê¸´ ë°°ì—´. ë˜ëŠ” ë§¤í•‘ í•¨ìˆ˜ function(key, value)
// space: ì„œì‹ ë³€ê²½ ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•  ê³µë°± ë¬¸ì ìˆ˜ (ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì¤‘ê°„ì— ì‚½ì…í•´ ì¤„ ê³µë°± ë¬¸ì ìˆ˜)
// space ì—†ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì¸ì½”ë”©ëœ JSONì— ë“¤ì—¬ì“°ê¸°ë‚˜ ì—¬ë¶„ì˜ ê³µë°± ë¬¸ìê°€ í•˜ë‚˜ë„ ì—†ë‹¤. spaceëŠ” ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•œ ìš©ë„ë¡œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì— ë‹¨ìˆœ
// ì „ë‹¬ ëª©ì ì´ë¼ë©´ space ì—†ì´ ì§ë ¬í™”í•œë‹¤.
// ì•„ë˜ ì˜ˆì‹œì²˜ëŸ¼ spaceì— 2ë¥¼ ë„˜ê²¨ì£¼ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¤‘ì²© ê°ì²´ë¥¼ ë³„ë„ì˜ ì¤„ì— ì¶œë ¥í•´ì£¼ê³  ê³µë°± ë¬¸ì ë‘ ê°œë¥¼ ë“¤ì—¬ì“°ê¸°í•´ ì¤€ë‹¤.

// JSON.stringify ë©”ì„œë“œëŠ” ê°ì²´ë¥¼ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
// í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ê°ì²´ë¥¼ ì „ì†¡í•˜ë ¤ë©´ ê°ì²´ë¥¼ ë¬¸ìì—´í™”í•´ì•¼ í•˜ëŠ”ë° ì´ë¥¼ ì§ë ¬í™”(serializing)ë¼ í•œë‹¤.
{
    const obj = {
        name: 'Lee',
        age: 20,
        alive: true,
        hobby: ['traveling', 'tennis'],
    };

    // ê°ì²´ë¥¼ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
    const json = JSON.stringify(obj);
    console.log(typeof json, json);
    // string {"name":"Lee","age":20,"alive":true,"hobby":["traveling","tennis"]}

    // ê°ì²´ë¥¼ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ë©´ì„œ ë“¤ì—¬ì“°ê¸° í•œë‹¤.
    const prettyJson = JSON.stringify(obj, null, 2);
    console.log(typeof prettyJson, prettyJson);
    // string {
    //   "name": "Lee",
    //   "age": 20,
    //   "alive": true,
    //   "hobby": [
    //     "traveling",
    //     "tennis"
    //   ]
    // }

    const prettyJson2 = JSON.stringify(obj, null, 4);
    console.log(typeof prettyJson1, prettyJson2);
    // string {
    //     "name": "Lee",
    //     "age": 20,
    //     "alive": true,
    //     "hobby": [
    //         "traveling",
    //         "tennis"
    //     ]
    // }

    // replacer í•¨ìˆ˜. ê°’ì˜ íƒ€ì…ì´ Numberì´ë©´ í•„í„°ë§ë˜ì–´ ë°˜í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤.
    function filter(key, value) {
        // undefined: ë°˜í™˜í•˜ì§€ ì•ŠìŒ
        return typeof value === 'number' ? undefined : value;
    }

    // https://ko.javascript.info/json
    // replacerì— ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜ëŠ” í”„ë¡œí¼í‹° (í‚¤, ê°’) ìŒ ì „ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ í˜¸ì¶œë˜ëŠ”ë°, ë°˜ë“œì‹œ ê¸°ì¡´ í”„ë¡œí¼í‹° ê°’ì„ ëŒ€ì‹ í•˜ì—¬ ì‚¬ìš©í•  ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.
    // íŠ¹ì • í”„ë¡œí¼í‹°ë¥¼ ì§ë ¬í™”í•´ì„œ ëˆ„ë½ì‹œí‚¤ë ¤ë©´ ë°˜í™˜ ê°’ì„ undefinedë¡œ ë§Œë“¤ë©´ ëœë‹¤.

    // JSON.stringify ë©”ì„œë“œì— ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ replacer í•¨ìˆ˜ë¥¼ ì „ë‹¬í•œë‹¤.
    const strFilteredObject = JSON.stringify(obj, filter, 2);
    console.log(typeof strFilteredObject, strFilteredObject);
    // string {
    //   "name": "Lee",
    //   "alive": true,
    //   "hobby": [
    //     "traveling",
    //     "tennis"
    //   ]
    // }

    // -> age í”„ë¡œí¼í‹°ê°€ ì‚­ì œëŒ
}

// JSON.stringify ë©”ì„œë“œëŠ” ê°ì²´ë¿ë§Œ ì•„ë‹ˆë¼ ë°°ì—´ë„ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
{
    const todos = [
        { id: 1, content: 'HTML', completed: false, },
        { id: 2, content: 'CSS', completed: true, },
        { id: 3, content: 'JavaScript', completed: false, },
    ];

    // ë°°ì—´ì„ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
    const json = JSON.stringify(todos, null, 2);
    console.log(typeof json, json);
    // string [
    //   {
    //     "id": 1,
    //     "content": "HTML",
    //     "completed": false
    //   },
    //   {
    //     "id": 2,
    //     "content": "CSS",
    //     "completed": true
    //   },
    //   {
    //     "id": 3,
    //     "content": "JavaScript",
    //     "completed": false
    //   }
    // ]
}


// ğŸ“Œ JSON.parse
// JSON.parse ë©”ì„œë“œëŠ” JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
// ì„œë²„ë¡œë¶€í„° í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡ëœ JSON ë°ì´í„°ëŠ” ë¬¸ìì—´ì´ë‹¤.
// ì´ ë¬¸ìì—´ì„ ê°ì²´ë¡œì„œ ì‚¬ìš©í•˜ë ¤ë©´ JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ê°ì²´í™”í•´ì•¼ í•˜ëŠ”ë° ì´ë¥¼ ì—­ì§ë ¬í™”(deserializing)ë¼ í•œë‹¤.
{
    const obj = {
        name: 'Lee',
        age: 20,
        alive: true,
        hobby: ['traveling', 'tennis'],
    };

    // ê°ì²´ë¥¼ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
    const json = JSON.stringify(obj);

    // JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
    const parsed = JSON.parse(json);
    console.log(typeof parsed, parsed);
    // object {name: 'Lee', age: 20, alive: true, hobby: Array(2)}
}

// ë°°ì—´ì´ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜ë˜ì–´ ìˆëŠ” ê²½ìš° JSON.parseëŠ” ë¬¸ìì—´ì„ ë°°ì—´ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
// ë°°ì—´ì˜ ìš”ì†Œê°€ ê°ì²´ì¸ ê²½ìš° ë°°ì—´ì˜ ìš”ì†Œê¹Œì§€ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
{
    const todos = [
        { id: 1, content: 'HTML', completed: false, },
        { id: 2, content: 'CSS', completed: true, },
        { id: 3, content: 'JavaScript', completed: false, },
    ];

    // ë°°ì—´ì„ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
    const json = JSON.stringify(todos);

    // JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ë°°ì—´ë¡œ ë³€í™˜í•œë‹¤. ë°°ì—´ì˜ ìš”ì†Œê¹Œì§€ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
    const parsed = JSON.parse(json);
    console.log(typeof parsed, parsed);
    // object (3) [{â€¦}, {â€¦}, {â€¦}]
}


// ğŸ‘‰ XMLHttpRequest
// ë¸Œë¼ìš°ì €ëŠ” ì£¼ì†Œì°½ì´ë‚˜ HTMLì˜ form íƒœê·¸ ë˜ëŠ” a íƒœê·¸ë¥¼ í†µí•´ HTTP ìš”ì²­ ì „ì†¡ ê¸°ëŠ¥ì„ ê¸°ë³¸ ì œê³µí•œë‹¤.
// ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ HTTP ìš”ì²­ì„ ì „ì†¡í•˜ë ¤ë©´ XMLHttpRequest ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤.
// Web APIì¸ XMLHttpRequest ê°ì²´ëŠ” HTTP ìš”ì²­ ì „ì†¡ê³¼ HTTP ì‘ë‹µ ìˆ˜ì‹ ì„ ìœ„í•œ ë‹¤ì–‘í•œ ë©”ì„œë“œì™€ í”„ë¡œí¼í‹°ë¥¼ ì œê³µí•œë‹¤.

// ğŸ“Œ XMLHttpRequest ê°ì²´ ìƒì„±
// XMLHttpRequest ê°ì²´ëŠ” XMLHttpRequest ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒì„±í•œë‹¤.
// XMLHttpRequest ê°ì²´ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” Web APIì´ë¯€ë¡œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.
{
    // XMLHttpRequest ê°ì²´ì˜ ìƒì„±
    const xhr = new XMLHttpRequest();
}

// ğŸ“Œ XMLHttpRequest ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œ
// XMLHttpRequest ê°ì²´ëŠ” ë‹¤ì–‘í•œ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.
// ëŒ€í‘œì ì¸ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

// ğŸŒ· XMLHttpRequest ê°ì²´ì˜ í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°
// í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°   | ì„¤ëª…
// readyState ì¤‘ìš”   | HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜. ë‹¤ìŒê³¼ ê°™ì€ XMLHttpRequestì˜ ì •ì  í”„ë¡œí¼í‹°ë¥¼ ê°’ìœ¼ë¡œ ê°–ëŠ”ë‹¤.
//                    - UNSENT: 0
//                    - OPENED: 1
//                    - HEADERS_RECEIVED: 2
//                    - LOADING: 3
//                    - DONE: 4
// status ì¤‘ìš”       | HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ìƒíƒœ(HTTP ìƒíƒœ ì½”ë“œ)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜
//                    ì˜ˆ) 200
// statusText ì¤‘ìš”   | HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´
//                    ì˜ˆ) "OK"
// responseType ì¤‘ìš” | HTTP ì‘ë‹µ íƒ€ì…
//                    ì˜ˆ) document, json, text, blob, arraybuffer
// response ì¤‘ìš”     | HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ëª¸ì²´(response body). responseTypeì— ë”°ë¼ íƒ€ì…ì´ ë‹¤ë¥´ë‹¤.
// responseText     | ì„œë²„ê°€ ì „ì†¡í•œ HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ë¬¸ìì—´

// ğŸŒ· XMLHttpRequest ê°ì²´ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°
// ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°       | ì„¤ëª…
// onreadystatechange ì¤‘ìš” | readyState í”„ë¡œí¼í‹° ê°’ì´ ë³€ê²½ëœ ê²½ìš°
// onloadstart            | HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë°›ê¸° ì‹œì‘í•œ ê²½ìš°
// onprogress             | HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë°›ëŠ ë„ì¤‘ ì£¼ê¸°ì ìœ¼ë¡œ ë°œìƒ
// onabort                | abort ë©”ì„œë“œì— ì˜í•´ HTTP ìš”ì²­ì´ ì¤‘ë‹¨ëœ ê²½ìš°
// onerror ì¤‘ìš”            | HTTP ìš”ì²­ì— ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš°
// onload ì¤‘ìš”             | HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•œ ê²½ìš°
// ontimeout              | HTTP ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼í•œ ê²½ìš°
// onloadend              | HTTP ìš”ì²­ì´ ì™„ë£Œí•œ ê²½ìš°. HTTP ìš”ì²­ì´ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨í•˜ë©´ ë°œìƒ

// ğŸŒ· XMLHttpRequest ê°ì²´ì˜ ë©”ì„œë“œ
// ë©”ì„œë“œ                 | ì„¤ëª…
// open ì¤‘ìš”             | HTTP ìš”ì²­ ì´ˆê¸°í™”
// send ì¤‘ìš”             | HTTP ìš”ì²­ ì „ì†¡
// abort ì¤‘ìš”            | ì´ë¯¸ ì „ì†¡ëœ HTTP ìš”ì²­ ì¤‘ë‹¨
// setRequestHeader ì¤‘ìš” | íŠ¹ì • HTTP ìš”ì²­ í—¤ë”ì˜ ê°’ì„ ì„¤ì •
// getRequestHeader     | íŠ¹ì • HTTP ìš”ì²­ í—¤ë”ì˜ ê°’ì„ ë¬¸ìì—´ë¡œ ë°˜í™˜

// ğŸŒ· XMLHttpRequest ê°ì²´ì˜ ì •ì  í”„ë¡œí¼í‹°
// ì •ì  í”„ë¡œí¼í‹°        | ê°’ | ì„¤ëª…
// UNSENT           | 0 | open ë©”ì„œë“œ í˜¸ì¶œ ì´ì „
// OPENED           | 1 | open ë©”ì„œë“œ í˜¸ì¶œ ì´í›„
// HEADERS_RECEIVED | 2 | send ë©”ì„œë“œ í˜¸ì¶œ ì´í›„
// LOADING          | 3 | ì„œë²„ ì‘ë‹µ ì¤‘(ì‘ë‹µ ë°ì´í„° ë¯¸ì™„ì„± ìƒíƒœ)
// DONE             | 4 | ì„œë²„ ì‘ë‹µ ì™„ë£Œ

// ğŸ“Œ HTTP ìš”ì²­ ì „ì†¡
// HTTP ìš”ì²­ì„ ì „ì†¡í•˜ëŠ” ê²½ìš° ë‹¤ìŒ ìˆœì„œë¥¼ ë”°ë¥¸ë‹¤.
// 1. XMLHttpRequest.prototype.open ë©”ì„œë“œë¡œ HTTP ìš”ì²­ì„ ì´ˆê¸°í™”í•œë‹¤.
// 2. í•„ìš”ì— ë”°ë¼ XMLHttpRequest.prototype.setRequestHeader ë©”ì„œë“œë¡œ íŠ¹ì • HTTP ìš”ì²­ì˜ í—¤ë” ê°’ì„ ì„¤ì •í•œë‹¤.
// 3. XMLHttpRequest.prototype.send ë©”ì„œë“œë¡œ HTTP ìš”ì²­ì„ ì „ì†¡í•œë‹¤.
{
    // XMLHttpRequest ê°ì²´ ìƒì„±
    const xhr = new XMLHttpRequest();

    // HTTP ìš”ì²­ ì´ˆê¸°í™”
    xhr.open('GET', '/users');

    // HTTP ìš”ì²­ í—¤ë” ì„¤ì •
    // í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ì „ì†¡í•  ë°ì´í„°ì˜ MIME íƒ€ì… ì§€ì •: json
    xhr.setRequestHeader('content-type', 'application/json');

    // HTTP ìš”ì²­ ì „ì†¡
    xhr.send();
}

// ğŸŒ· XMLHttpRequest.prototype.open
// open ë©”ì„œë“œëŠ” ì„œë²„ì— ì „ì†¡í•  HTTP ìš”ì²­ì„ ì´ˆê¸°í™”í•œë‹¤.
// open ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
// xhr.open(method, url[, async]);

// ë§¤ê°œë³€ìˆ˜ | ì„¤ëª…
// method | HTTP ìš”ì²­ ë©”ì„œë“œ("GET", "POST", "PUT", "DELETE" ë“±)
// url    | HTTP ìš”ì²­ì„ ì „ì†¡í•  URL
// async  | ë¹„ë™ê¸° ìš”ì²­ ì—¬ë¶€. ì˜µì…˜ìœ¼ë¡œ ê¸°ë³¸ê°’ì€ trueì´ë©°, ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

// HTTP ìš”ì²­ ë©”ì„œë“œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ ìš”ì²­ì˜ ì¢…ë¥˜ì™€ ëª©ì (ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ í–‰ìœ„)ì„ ì•Œë¦¬ëŠ” ë°©ë²•ì´ë‹¤.
// ì£¼ë¡œ 5ê°€ì§€ ìš”ì²­ ë©”ì„œë“œ(GET, POST, PUT, PATCH, DELETE ë“±)ë¥¼ ì‚¬ìš©í•˜ì—¬ CRUDë¥¼ êµ¬í˜„í•œë‹¤.

// HTTP ìš”ì²­ ë©”ì„œë“œ  | ì¢…ë¥˜            |  ëª©ì                | í˜ì´ë¡œë“œ(ì „ì†¡ë˜ëŠ” ë°ì´í„°)
// GET            | index/retrieve | ëª¨ë“ /íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì·¨ë“   | X
// POST           | create         | ë¦¬ì†ŒìŠ¤ ìƒì„±           | O
// PUT            | replace        | ë¦¬ì†ŒìŠ¤ì˜ ì „ì²´ êµì²´      | O
// PATCH          | modify         | ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ ìˆ˜ì •      | O
// DELETE         | delete         | ëª¨ë“ /íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì‚­ì œ    | X

// ğŸŒ· XMLHttpRequest.prototype.send
// send ë©”ì„œë“œëŠ” open ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ëœ HTTP ìš”ì²­ì„ ì„œë²„ì— ì „ì†¡í•œë‹¤.
// ê¸°ë³¸ì ìœ¼ë¡œ ì„œë²„ë¡œ ì „ì†¡í•˜ëŠ” ë°ì´í„°ëŠ” GET, POST ìš”ì²­ ë©”ì„œë“œì— ë”°ë¼ ì „ì†¡ ë°©ì‹ì— ì°¨ì´ê°€ ìˆë‹¤.

// - GET ìš”ì²­ ë©”ì„œë“œì˜ ê²½ìš° ë°ì´í„°ë¥¼ URLì˜ ì¼ë¶€ë¶„ì¸ ì¿¼ë¦¬ ë¬¸ìì—´(query string)ë¡œ ì„œë²„ì— ì „ì†¡í•œë‹¤.
// - POST ìš”ì²­ ë©”ì„œë“œì˜ ê²½ìš° ë°ì´í„°(í˜ì´ë¡œë“œ(payload))ë¥¼ ìš”ì²­ ëª¸ì²´(request body)ì— ë‹´ì•„ ì „ì†¡í•œë‹¤.

// â—ï¸ send ë©”ì„œë“œì—ëŠ” ìš”ì²­ ëª¸ì²´ì— ë‹´ì•„ ì „ì†¡í•  ë°ì´í„°(í˜ì´ë¡œë“œ)ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
// í˜ì´ë¡œë“œê°€ ê°ì²´ì¸ ê²½ìš° ë°˜ë“œì‹œ JSON.stringify ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ë ¬í™”(ê°ì²´->JSON)í•œ ë‹¤ìŒ ì „ë‹¬í•´ì•¼ í•œë‹¤.

{
   //  xhr.send({id: 1, content: 'HTML', complete: false});
}

// HTTP ìš”ì²­ ë©”ì„œë“œê°€ GETì¸ ê²½ìš° send ë©”ì„œë“œì— í˜ì´ë¡œë“œë¡œ ì „ë‹¬í•œ ì¸ìˆ˜ëŠ” ë¬´ì‹œë˜ê³  ìš”ì²­ ëª¸ì²´ëŠ” nullë¡œ ì„¤ì •ëœë‹¤.

// ğŸŒ· XMLHttpRequest.prototype.setRequestHeader
// setRequestHeader ë©”ì„œë“œëŠ” íŠ¹ì • HTTP ìš”ì²­ì˜ í—¤ë” ê°’ì„ ì„¤ì •í•œë‹¤.
// setRequestHeader ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ open ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ì´í›„ì— í˜¸ì¶œí•´ì•¼ í•œë‹¤.
// ìì£¼ ì‚¬ìš©í•˜ëŠ” HTTP ìš”ì²­ í—¤ë”ì¸ Content-typeê³¼ Acceptì— ëŒ€í•´ ì‚´í´ë³´ì.

// Content-typeì€ ìš”ì²­ ëª¸ì²´ì— ë‹´ì•„ ì „ì†¡í•  ë°ì´í„°ì˜ MIME íƒ€ì…ì˜ ì •ë³´ë¥¼ í‘œí˜„í•œë‹¤.
// ìì£¼ ì‚¬ìš©ë˜ëŠ” MIME íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

// MIME íƒ€ì…        | ì„œë¸Œíƒ€ì…
// text            | text/plain, text/html, text/css, text/javascrirpt
// application     | application/json, application/x-www-form-urlencode
// multipart       | multipart/formed-data

// ë‹¤ìŒì€ ìš”ì²­ ëª¸ì²´ì— ë‹´ì•„ ì„œë²„ë¡œ ì „ì†¡í•  í˜ì´ë¡œë“œì˜ MIME íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ì˜ˆë‹¤.

{
    // XMLHttpRequest ê°ì²´ ìƒì„±
    const xhr = new XMLHttpRequest();

    // HTTP ìš”ì²­ ì´ˆê¸°í™”
    xhr.open('POST', '/users');

    // HTTP ìš”ì²­ í—¤ë” ì„¤ì •
    // í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ì „ì†¡í•  ë°ì´í„°ì˜ MIME íƒ€ì… ì§€ì •: json
    xhr.setRequestHeader('content-type', 'application/json');

    // HTTP ìš”ì²­ ì „ì†¡
    xhr.send(JSON.stringify({id: 1, content: 'HTML', complete: false}));
}

// HTTP í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­í•  ë•Œ ì„œë²„ê°€ ì‘ë‹µí•  ë°ì´í„°ì˜ MIME íƒ€ì…ì„ Acceptë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
// ë‹¤ìŒì€ ì„œë²„ê°€ ì‘ë‹µí•  ë°ì´í„°ì˜ MIME íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ì˜ˆë‹¤.

{
    // ì„œë²„ê°€ ì‘ë‹´í•  ë°ì´í„°ì˜ MIME íƒ€ì… ì§€ì •: json
    // xhr.setRequestHeader('accept', 'application/json');
}

// ë§Œì•½ Accept í—¤ë”ë¥¼ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ send ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ Accept í—¤ë”ê°€ */*ë¡œ ì „ì†¡ëœë‹¤.


// ğŸ“Œ HTTP ì‘ë‹µ ì²˜ë¦¬
// ì„œë²„ê°€ ì „ì†¡í•œ ì‘ë‹µì„ ì²˜ë¦¬í•˜ë ¤ë©´ XMLHttpRequest ê°ì²´ê°€ ë°œìƒì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•´ì•¼ í•œë‹¤.
// 43.3.2ì ˆ "XMLHttpRequest ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œ"ì—ì„œ ì‚´í´ë³¸ ë°”ì™€ ê°™ì´ XMLHttpRequest ê°ì²´ëŠ” onreadystatechange, onload, onerror
// ì™€ ê°™ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ”ë‹¤.
// ì´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹° ì¤‘ì—ì„œ HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” readyState í”„ë¡œí¼í‹° ê°’ì´ ë³€ê²½ëœ ê²½ìš° ë°œìƒí•˜ëŠ” readystatechange ì´ë²¤íŠ¸ë¥¼
// ìºì¹˜í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ HTTP ì‘ë‹µì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

// XMLHttpRequest ê°ì²´ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” Web APIì´ë¯€ë¡œ ë‹¤ìŒ ì˜ˆì œëŠ” ë°˜ë“œì‹œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì‹¤í–‰í•´ì•¼ í•œë‹¤.
// ì°¸ê³ ë¡œ HTTP ìš”ì²˜ì„ ì „ì†¡í•˜ê³  ì‘ë‹µì„ ë°›ìœ¼ë ¤ë©´ ì„œë²„ë¡œ í•„ìš”í•˜ë‹¤.
// ë‹¤ìŒ ì˜ˆì œì—ì„œëŠ” JSONPlaceholderì—ì„œ ì œê³µí•˜ëŠ” ê°€ìƒ(fake) REST APIë¥¼ ì‚¬ìš©í•œë‹¤.
// REST APIëŠ” 44ì¥ "REST API"ì—ì„œ ìì„¸íˆ ì‚´í´ë³¼ ê²ƒì´ë‹¤.

{
    // XMLHttpRequest ê°ì²´ ìƒì„±
    const xhr = new XMLHttpRequest();

    // HTTP ìš”ì²­ ì´ˆê¸°í™”
    // https://jsonplaceholder.typicode.comì€ Fake REST APIë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë‹¤.
    xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');

    // HTTP ìš”ì²­ ì „ì†¡
    xhr.send();

    // readystatechange ì´ë²¤íŠ¸ëŠ” HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” readyState í”„ë¡œí¼í‹°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ëœë‹¤.
    xhr.onreadystatechange = () => {
        // readyState í”„ë¡œí¼í‹°ëŠ” HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        // readyState í”„ë¡œí¼í‹° ê°’ì´ 4(XMLHttpRequest.DONE)ê°€ ì•„ë‹ˆë©´ ì„œë²„ ì‘ë‹µì´ ì™„ë£Œë˜ì§€ ì•Šì€ ìƒíƒœë‹¤.

        // ë§Œì•½ ì„œë²„ ì‘ë‹µì´ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì•„ë¬´ëŸ° ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.
        if (xhr.readyState !== XMLHttpRequest.DONE) {
            return;
        }

        // status í”„ë¡œí¼í‹°ëŠ” ì‘ë‹µ ìƒíƒœ ì½”ë“œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœê³ ,
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ìƒíƒœë‹¤.
        // ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœë¼ë©´ response í”„ë¡œí¼í‹°ì— ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ê°€ ë‹´ê²¨ìˆë‹¤.
        if (xhr.status === 200) {
            console.log(JSON.parse(xhr.response));
            // {userId: 1, id: 1, title: 'delectus aut autem', completed: false}
        } else {
            console.error('Error', xhr.status, xhr.statusText);
        }
    };

}

// send ë©”ì„œë“œë¥¼ í†µí•´ HTTP ìš”ì²­ì„ ì„œë²„ì— ì „ì†¡í•˜ë©´ ì„œë²„ëŠ” ì‘ë‹µì„ ë°˜í™˜í•œë‹¤.
// í•˜ì§€ë§Œ ì–¸ì œ ì‘ë‹µì´ í´ë¼ì´ì–¸íŠ¸ì— ë„ë‹¬í• ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.
// ë”°ë¼ì„œ readystatechange ì´ë²¤íŠ¸ë¥¼ í†µí•´ HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤.
// readystatechange ì´ë²¤íŠ¸ëŠ” HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” readyState í”„ë¡œí¼í‹°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë°œìƒí•œë‹¤.

// onreadystatechange ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— í• ë‹¹í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” xhr.readyStateê°€ XMLHttpRequest.DONE
// ì¸ì§€ í™•ì¸í•˜ì—¬ ì„œë²„ì˜ ì‘ë‹µì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

// ì„œë²„ì˜ ì‘ë‹µì´ ì™„ë£Œë˜ë©´ HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ(HTTP ìƒíƒœ ì½”ë“œ)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” xhr.statusê°€ 200ì¸ì§€ í™•ì¸í•˜ì—¬ ì •ìƒ ì²˜ë¦¬ì™€ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ êµ¬ë¶„í•œë‹¤.
// HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì´ ì •ìƒì ìœ¼ë¡œ ë„ì°©í–ˆë‹¤ë©´ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ëª¸ì²´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” xhr.responseì—ì„œ ì„œë²„ê°€ ì „ì†¡í•œ ë°ì´í„°ë¥¼ ì·¨ë“í•œë‹¤.
// ë§Œì•½ xhr.statusê°€ 200ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ìƒíƒœì´ë¯€ë¡œ í•„ìš”í•œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•œë‹¤.

// â—ï¸ readystatechange ì´ë²¤íŠ¸ ëŒ€ì‹  load ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•´ë„ ì¢‹ë‹¤.
// load ì´ë²¤íŠ¸ëŠ” HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ ê²½ìš° ë°œìƒí•œë‹¤.
// ë”°ë¼ì„œ load ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•˜ëŠ” ê²½ìš° xhr.readyStateê°€ XMLHttpRequest.DONEì¸ì§€ í™•ì¸í•  í•„ìš”ê°€ ì—†ë‹¤.

{
    // XMLHttpRequest ê°ì²´ ìƒì„±
    const xhr = new XMLHttpRequest();

    // HTTP ìš”ì²­ ì´ˆê¸°í™”
    xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');

    // HTTP ìš”ì²­ ì „ì†¡
    xhr.send();

    // load ì´ë²¤íŠ¸ëŠ” HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ ê²½ìš° ë°œìƒí•œë‹¤.
    xhr.onload = () => {
        // status í”„ë¡œí¼í‹°ëŠ” ì‘ë‹µ ìƒíƒœ ì½”ë“œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœê³ ,
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ìƒíƒœë‹¤.
        // ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœë¼ë©´ response í”„ë¡œí¼í‹°ì— ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ê°€ ë‹´ê²¨ìˆë‹¤.
        if (xhr.status === 200) {
            console.log(JSON.parse(xhr.response));
            // {userId: 1, id: 1, title: 'delectus aut autem', completed: false}
        } else {
            console.error('Error', xhr.status, xhr.statusText);
        }
    };
}





























